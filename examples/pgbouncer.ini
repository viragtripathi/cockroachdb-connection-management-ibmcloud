[databases]
crdb = host=<nlb-host-or-ip> port=26257 dbname=<db> auth_user=<user> sslmode=verify-full

[pgbouncer]
listen_addr = 0.0.0.0
listen_port = 6432
auth_type = any
auth_file = userlist.txt
server_reset_query = DISCARD ALL

# Pooling mode: "transaction" is common; test both "session" and "transaction"
pool_mode = transaction

# Size active concurrency sensibly (sum across all PgBouncer instances)
default_pool_size = 20
max_client_conn   = 1000
server_idle_timeout = 600
server_lifetime     = 1800   ; ~30m rotate
server_round_robin  = 1

# TLS to CockroachDB (client<->PgBouncer and PgBouncer<->DB as needed)
; client_tls_sslmode = require
; server_tls_sslmode = verify-full